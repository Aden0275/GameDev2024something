<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Mario-like Game</title>
    <style>
        body {
            margin: 0;
            background-color: #87CEEB; /* Sky Color */
        }

        #gameArea {
            width: 800px;
            height: 400px;
            position: relative;
            overflow: hidden;
            border: 2px solid #000;
            background-color: #87CEEB; /* Sky Color */
        }

        #character {
            width: 50px;
            height: 50px;
            position: absolute;
            bottom: 50px; /* Start above ground */
            background-color: red; /* Character color */
            transition: bottom 0.1s;
        }

        .ground {
            width: 100%;
            height: 50px;
            background-color: green; /* Ground Color */
            position: absolute;
            bottom: 0;
        }

        .obstacle {
            width: 40px;
            height: 40px;
            background-color: brown; /* Obstacle Color */
            position: absolute;
            bottom: 50px;
            animation: move 3s linear infinite;
        }

        @keyframes move {
            from { left: 800px; }
            to { left: -40px; }
        }

        .coin {
            width: 20px;
            height: 20px;
            background-color: gold; /* Coin Color */
            border-radius: 50%; /* Make it circular */
            position: absolute;
            bottom: 100px; /* Above the ground */
        }

        #score {
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 24px;
            color: black;
        }
    </style>
</head>
<body>
    <div id="gameArea">
        <div id="character"></div>
        <div class="ground"></div>
        <div id="score">Score: 0</div>
    </div>

    <script>
        const character = document.getElementById('character');
        const gameArea = document.getElementById('gameArea');
        const scoreDisplay = document.getElementById('score');
        let isJumping = false;
        let position = 0;
        let score = 0;

        // Function to make the character jump
        function jump() {
            if (isJumping) return;
            isJumping = true;

            let jumpHeight = 0;
            const jumpInterval = setInterval(() => {
                if (jumpHeight >= 100) {
                    clearInterval(jumpInterval);

                    // Start falling
                    const fallInterval = setInterval(() => {
                        if (jumpHeight <= 0) {
                            clearInterval(fallInterval);
                            isJumping = false;
                        }
                        jumpHeight -= 4; // Control fall speed
                        character.style.bottom = `${position + jumpHeight}px`;
                    }, 20);
                }
                jumpHeight += 4; // Control jump speed
                character.style.bottom = `${position + jumpHeight}px`;
            }, 20);
        }

        // Function to create obstacles
        function createObstacle() {
            const obstacle = document.createElement('div');
            obstacle.classList.add('obstacle');
            obstacle.style.bottom = '50px'; // Start height
            obstacle.style.left = '800px'; // Start left position
            gameArea.appendChild(obstacle);

            // Check for collision with character
            const obstacleInterval = setInterval(() => {
                const characterRect = character.getBoundingClientRect();
                const obstacleRect = obstacle.getBoundingClientRect();

                if (characterRect.right > obstacleRect.left &&
                    characterRect.left < obstacleRect.right &&
                    characterRect.bottom > obstacleRect.top) {
                    alert("Game Over! Final Score: " + score);
                    clearInterval(obstacleInterval);
                    resetGame();
                }

                // Remove the obstacle if it goes off screen
                if (obstacleRect.left < 0) {
                    clearInterval(obstacleInterval);
                    gameArea.removeChild(obstacle);
                }
            }, 20);
        }

        // Function to create coins
        function createCoin() {
            const coin = document.createElement('div');
            coin.classList.add('coin');
            coin.style.left = Math.random() * (gameArea.clientWidth - 20) + 'px'; // Random position
            gameArea.appendChild(coin);

            // Check for collection
            const coinInterval = setInterval(() => {
                const characterRect = character.getBoundingClientRect();
                const coinRect = coin.getBoundingClientRect();

                if (characterRect.right > coinRect.left &&
                    characterRect.left < coinRect.right &&
                    characterRect.bottom > coinRect.top) {
                    score++;
                    scoreDisplay.innerText = "Score: " + score;
                    clearInterval(coinInterval);
                    gameArea.removeChild(coin);
                }

                // Remove the coin if it goes off screen (optional, can adjust timing)
                if (coinRect.bottom < 0) {
                    clearInterval(coinInterval);
                    gameArea.removeChild(coin);
                }
            }, 20);
        }

        // Function to reset the game
        function resetGame() {
            // Remove all obstacles and coins
            const obstacles = document.querySelectorAll('.obstacle');
            obstacles.forEach(obstacle => gameArea.removeChild(obstacle));

            const coins = document.querySelectorAll('.coin');
            coins.forEach(coin => gameArea.removeChild(coin));

            // Reset score and character position
            score = 0;
            scoreDisplay.innerText = "Score: " + score;
            character.style.bottom = '50px';
        }

        // Start the game
        setInterval(() => {
            createObstacle();
            if (Math.random() < 0.5) createCoin(); // 50% chance to create a coin
        }, 2000);

        // Listen for key presses to jump
        document.addEventListener('keydown', (event) => {
            if (event.code === 'Space') {
                jump();
            }
        });
    </script>
</body>
</html>
