<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mario-like Game</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }

        #game {
            position: relative;
            width: 800px;
            height: 400px;
            border: 2px solid #000;
            background: url('background1.jpg') no-repeat center center; /* Background image for level 1 */
            background-size: cover;
            overflow: hidden;
        }

        #player {
            width: 40px;
            height: 60px;
            background-color: #FF0000; /* Player color */
            position: absolute;
            bottom: 100px; /* Starting position above ground */
            left: 50px;
            transition: left 0.1s;
        }

        .ground, .platform {
            position: absolute;
            width: 100%;
            height: 20px;
            background-color: #654321; /* Ground color */
        }

        .platform {
            background-color: #228B22; /* Platform color */
        }

        .enemy {
            width: 40px;
            height: 40px;
            background-color: #0000FF; /* Default enemy color */
            position: absolute;
            bottom: 100px;
            transition: left 0.1s;
        }

        .collectible {
            width: 20px;
            height: 20px;
            background-color: #FFD700; /* Collectible color */
            position: absolute;
            bottom: 120px; /* Above ground */
        }

        #score, #lives, #level {
            position: absolute;
            top: 10px;
            font-size: 24px;
            color: #FFFFFF; /* Text color */
        }

        #lives {
            right: 10px;
        }

        #level {
            left: 10px;
        }

        #menu {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: none;
            text-align: center;
            background: rgba(0, 0, 0, 0.7);
            padding: 20px;
            border-radius: 10px;
        }

        #menu button {
            padding: 10px 20px;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <div id="game">
        <div id="player"></div>
        <div class="ground"></div>
        <div class="platform" style="width: 150px; bottom: 200px; left: 300px;"></div>
        <div class="platform" style="width: 100px; bottom: 300px; left: 600px;"></div>
        <div id="score">Score: 0</div>
        <div id="lives">Lives: 3</div>
        <div id="level">Level: 1</div>
        <div id="menu">
            <h1>Mario-like Game</h1>
            <button onclick="startGame()">Start Game</button>
        </div>
    </div>
    <audio id="jumpSound" src="jump.mp3"></audio>
    <audio id="collectSound" src="collect.mp3"></audio>
    <audio id="gameOverSound" src="gameover.mp3"></audio>

    <script>
        const player = document.getElementById('player');
        const gameArea = document.getElementById('game');
        const scoreDisplay = document.getElementById('score');
        const livesDisplay = document.getElementById('lives');
        const levelDisplay = document.getElementById('level');
        const menu = document.getElementById('menu');
        const jumpSound = document.getElementById('jumpSound');
        const collectSound = document.getElementById('collectSound');
        const gameOverSound = document.getElementById('gameOverSound');

        let isJumping = false;
        let jumpHeight = 0;
        let gravity = 5;
        let playerBottom = 100;
        let score = 0;
        let lives = 3;
        let gameOver = false;
        let level = 1;

        // Start game function
        function startGame() {
            score = 0;
            lives = 3;
            level = 1;
            gameOver = false;
            scoreDisplay.innerText = `Score: ${score}`;
            livesDisplay.innerText = `Lives: ${lives}`;
            levelDisplay.innerText = `Level: ${level}`;
            menu.style.display = 'none';
            resetGame();
            createEnemies();
            createCollectibles();
        }

        // Reset game state
        function resetGame() {
            player.style.left = '50px';
            player.style.bottom = '100px';
            playerBottom = 100;
            document.querySelectorAll('.enemy').forEach(enemy => enemy.remove());
            document.querySelectorAll('.collectible').forEach(collectible => collectible.remove());
            gameArea.style.backgroundImage = `url('background${level}.jpg')`; // Change background based on level
        }

        // Create enemies
        function createEnemies() {
            setInterval(() => {
                if (gameOver) return;
                const enemy = document.createElement('div');
                enemy.classList.add('enemy');
                enemy.style.left = '800px'; // Start off screen
                enemy.style.bottom = Math.random() * (gameArea.clientHeight - 120) + 80 + 'px'; // Random vertical position
                gameArea.appendChild(enemy);
                moveEnemy(enemy);
            }, 2000); // Create enemy every 2 seconds
        }

        function moveEnemy(enemy) {
            let left = 800;
            const enemyInterval = setInterval(() => {
                if (gameOver) {
                    clearInterval(enemyInterval);
                    return;
                }
                left -= 2; // Move left
                enemy.style.left = left + 'px';
                if (left < -40) {
                    clearInterval(enemyInterval);
                    gameArea.removeChild(enemy);
                }
                checkCollision(enemy);
            }, 20);
        }

        // Create collectibles
        function createCollectibles() {
            setInterval(() => {
                if (gameOver) return;
                const collectible = document.createElement('div');
                collectible.classList.add('collectible');
                collectible.style.left = Math.random() * (gameArea.clientWidth - 20) + 'px';
                collectible.style.bottom = Math.random() * (gameArea.clientHeight - 120) + 80 + 'px'; // Above ground
                gameArea.appendChild(collectible);
                checkCollectible(collectible);
            }, 5000); // Create collectible every 5 seconds
        }

        function checkCollectible(collectible) {
            const collectibleInterval = setInterval(() => {
                if (gameArea.contains(collectible)) {
                    let playerRect = player.getBoundingClientRect();
                    let collectibleRect = collectible.getBoundingClientRect();
                    if (playerRect.x < collectibleRect.x + collectibleRect.width &&
                        playerRect.x + playerRect.width > collectibleRect.x &&
                        playerRect.y < collectibleRect.y + collectibleRect.height &&
                        playerRect.y + playerRect.height > collectibleRect.y) {
                        score += 10; // Increase score
                        scoreDisplay.innerText = `Score: ${score}`;
                        collectSound.play(); // Play collect sound
                        gameArea.removeChild(collectible);
                        clearInterval(collectibleInterval);
                    }
                } else {
                    clearInterval(collectibleInterval);
                }
            }, 100);
        }

        // Check for player and enemy collision
        function checkCollision(enemy) {
            let playerRect = player.getBoundingClientRect();
            let enemyRect = enemy.getBoundingClientRect();
            if (playerRect.x < enemyRect.x + enemyRect.width &&
                playerRect.x + playerRect.width > enemyRect.x &&
                playerRect.y < enemyRect.y + enemyRect.height &&
                playerRect.y + playerRect.height > enemyRect.y) {
                loseLife();
            }
        }

        function loseLife() {
            lives--;
            livesDisplay.innerText = `Lives: ${lives}`;
            if (lives <= 0) {
                gameOver = true;
                gameOverSound.play(); // Play game over sound
                alert('Game Over! Your score: ' + score);
                menu.style.display = 'block';
                resetGame();
            }
        }

        document.addEventListener('keydown', (event) => {
            if (event.code === 'ArrowRight') {
                moveRight();
            } else if (event.code === 'ArrowLeft') {
                moveLeft();
            } else if (event.code === 'Space' && !isJumping) {
                jump();
            }
        });

        function moveRight() {
            let left = parseInt(window.getComputedStyle(player).getPropertyValue('left'));
            if (left < gameArea.clientWidth - 50) {
                player.style.left = left + 5 + 'px';
            }
        }

        function moveLeft() {
            let left = parseInt(window.getComputedStyle(player).getPropertyValue('left'));
            if (left > 0) {
                player.style.left = left - 5 + 'px';
            }
        }

        function jump() {
            isJumping = true;
            jumpSound.play(); // Play jump sound
            let jumpInterval = setInterval(() => {
                if (jumpHeight >= 100) {
                    clearInterval(jumpInterval);
                    fall();
                } else {
                    jumpHeight += 5;
                    playerBottom += 5;
                    player.style.bottom = playerBottom + 'px';
                }
            }, 20);
        }

        function fall() {
            let fallInterval = setInterval(() => {
                if (playerBottom <= 100) {
                    clearInterval(fallInterval);
                    playerBottom = 100;
                    player.style.bottom = playerBottom + 'px';
                    isJumping = false;
                    jumpHeight = 0;
                } else {
                    playerBottom -= gravity;
                    player.style.bottom = playerBottom + 'px';
                }
            }, 20);
        }

        // Level transition
        function nextLevel() {
            level++;
            if (level > 3) {
                level = 1; // Loop back to level 1
            }
            levelDisplay.innerText = `Level: ${level}`;
            resetGame();
            createEnemies();
            createCollectibles();
        }

        // Show menu on load
        window.onload = () => {
            menu.style.display = 'block';
        };
    </script>
</body>
</html>
