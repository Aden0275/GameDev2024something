<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap">
    <title>Animal and Pokémon Demo</title>
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(to bottom right, #ffcc00, #ff3300);
            color: #333;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            flex-wrap: wrap;
            min-height: 100vh;
            box-sizing: border-box;
        }

        h2 {
            text-align: center;
            color: #4CAF50;
        }

        #container,
        #pokemonSection {
            max-width: 600px;
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin: 10px;
            opacity: 0.95;
        }

        input[type="text"],
        input[type="number"],
        input[type="button"] {
            width: calc(100% - 20px);
            padding: 10px;
            margin: 10px 0;
            border: 2px solid #ff3300;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input[type="button"] {
            background-color: #ff3300;
            color: white;
            cursor: pointer;
            border: none;
            border-radius: 5px;
        }

        .animal-entry,
        .pokemon-entry {
            padding: 5px;
            margin-bottom: 5px;
            border-radius: 5px;
        }

        .pokemon-entry {
            background: #ffe066;
        }

        .pokemon-image {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>

<body>
    <div id="container">
        <h2>Animal Class Complex Demonstration</h2>
        <script>
            // Base class representing an Animal
            class MyAnimal {
                constructor(name, age, habitat) {
                    this.myName = name;
                    this.myAge = age;
                    this.habitat = habitat;
                }

                makeSound() {
                    return 'Some generic animal sound';
                }

                eat() {
                    return `${this.myName} is eating.`;
                }

                toString() {
                    return `${this.myName} is a ${this.myAge} year old animal living in the ${this.habitat}.`;
                }

                myShow() {
                    document.getElementById('myDiv01').innerHTML += `
                        <div class="animal-entry">
                            <p>${this.toString()}</p>
                            <p>${this.myName} says: ${this.makeSound()}</p>
                        </div>`;
                }
            }

            class MyCat extends MyAnimal {
                constructor(name, age) {
                    super(name, age, "house");
                }
                makeSound() {
                    return 'Meow!';
                }
            }

            class MyDog extends MyAnimal {
                constructor(name, age) {
                    super(name, age, "house");
                }
                makeSound() {
                    return 'Woof!';
                }
            }

            class MyBird extends MyAnimal {
                constructor(name, age) {
                    super(name, age, "sky");
                }
                makeSound() {
                    return 'Chirp!';
                }
            }

            class MyFish extends MyAnimal {
                constructor(name, age) {
                    super(name, age, "water");
                }
                makeSound() {
                    return 'Glub!';
                }
            }

            class MyRabbit extends MyAnimal {
                constructor(name, age) {
                    super(name, age, "meadow");
                }
                makeSound() {
                    return 'Squeak!';
                }
            }

            const validAnimals = ['Cat', 'Dog', 'Bird', 'Fish', 'Rabbit'];

            const createAnimal = (type, name, age) => {
                switch (type) {
                    case 'Cat': return new MyCat(name, age);
                    case 'Dog': return new MyDog(name, age);
                    case 'Bird': return new MyBird(name, age);
                    case 'Fish': return new MyFish(name, age);
                    case 'Rabbit': return new MyRabbit(name, age);
                    default: return null;
                }
            }

            const resetErrorMessage = () => {
                document.getElementById('errorMessage').innerHTML = '';
            }

            const showErrorMessage = () => {
                const errorMessage = document.getElementById('errorMessage');
                errorMessage.innerHTML = "Animal is not valid. Please enter one of the following: " + validAnimals.join(', ');
            }
        </script>

        <!-- Default inputs for animals -->
        <input type="text" id="animalType" placeholder="Enter animal type" value="Cat">
        <input type="text" id="animalName" placeholder="Enter animal name" value="Whiskers">
        <input type="number" id="animalAge" placeholder="Enter animal age" min="1" value="3">
        <input type="button" value="Create Animal" onClick="{
            const type = document.getElementById('animalType').value;
            const name = document.getElementById('animalName').value;
            const age = document.getElementById('animalAge').value;

            resetErrorMessage(); 

            if (type && name && age > 0) {
                let animal = createAnimal(type, name, parseInt(age));
                if (animal) {
                    animal.myShow();
                } else {
                    showErrorMessage(); 
                }
            } else {
                showErrorMessage();
            }
        }"><br>

        <div id="errorMessage"></div>
        <div id="myDiv01">...</div>
    </div>

    <div id="pokemonSection">
        <h2>Pokémon Generator</h2>
        <input type="text" id="pokemonSearch" placeholder="Search Pokémon by name or ID" value="pikachu">
        <input type="button" value="Search" onClick="searchPokemon()"><br>
        <input type="button" value="Generate Random Pokémon" onClick="showPokemon()"><br>

        <!-- New Buttons for Mega Evolve and Gigantimax -->
        <input type="button" value="Show Mega Evolution" onClick="showMegaEvolution()">
        <input type="button" value="Show Gigantimax" onClick="showGigantimax()"><br>

        <div id="pokemonDisplay">Choose a Pokémon!</div>
    </div>

    <script>
        let pokemons = [];
        let currentPokemon = null; // Store current Pokémon for toggling shiny

        const megaSprites = {
            "gardevoir": "https://i.ibb.co/VJJDCHV/362-front-s.gif",
            "banette": "https://i.ibb.co/tCg2pzd/373-front-n.gif",
            "gengar": "https://i.ibb.co/mThQmqL/376-front-n.gif",
            "salamence": "https://i.ibb.co/4FsfVg7/384-front-n.gif",
            "lopunny": "https://i.ibb.co/0tFL3br/428-front-n.gif",
            "sharpedo": "https://i.ibb.co/9q1yyvP/445-front-n.gif",
            "lucario": "https://i.ibb.co/F0MRVbg/448-front-n.gif",
            "pidgeot": "https://i.ibb.co/RhzFpt1/460-front-n.gif",
            "absol": "https://i.ibb.co/wBhc3Kr/531-front-n.gif",
            "mewtwo": "https://i.ibb.co/s55wF1W/150-front-n.gif",
            "latios": "https://i.ibb.co/fHy2KTZ/181-front-n.gif",
            "latias": "https://i.ibb.co/pfmTZS3/208-front-n.gif",
            "scizor": "https://i.ibb.co/XybN09n/212-front-n.gif",
            "sableye": "https://i.ibb.co/31Z8X91/214-front-n.gif",
            "dusknoir": "https://i.ibb.co/dQdgBty/229-front-n.gif",
            "charizard_x": "https://i.ibb.co/xgJ2FH6/006-front-n.gif",
            "charizard_y": "https://i.ibb.co/006-front-n.gif",
            "blastoise": "https://i.ibb.co/jbkwVYC/009-front-n.gif",
            "sceptile": "https://i.ibb.co/g4nRBc4/310-front-n.gif",
            "heracross": "https://i.ibb.co/2tbWVP1/065-front-n.gif",
            "manectric": "https://i.ibb.co/NtjkSKD/080-front-n.gif",
        };

        const gigantamaxSprites = {
            "pikachu": "path/to/gigantamax/pikachu.png", // Update the actual path as needed
        };

        const fetchPokemons = async (limit = 1025) => {
            const promises = [];
            for (let i = 1; i <= limit; i++) {
                promises.push(fetch(`https://pokeapi.co/api/v2/pokemon/${i}`));
            }
            const responses = await Promise.all(promises);
            for (const response of responses) {
                const data = await response.json();
                const speciesResponse = await fetch(data.species.url);
                const speciesData = await speciesResponse.json();
                const description = speciesData.flavor_text_entries.find(entry => entry.language.name === 'en').flavor_text;
                const imageUrl = data.sprites.front_default; // Regular sprite
                const shinyImageUrl = data.sprites.front_shiny; // Shiny sprite

                // Store Pokémon data
                pokemons.push({
                    id: data.id,
                    name: data.name,
                    type: data.types.map(type => type.type.name).join(', '),
                    hp: data.stats[0].base_stat,
                    attack: data.stats[1].base_stat,
                    defense: data.stats[2].base_stat,
                    description: description.replace(/\n/g, ' '), // Clean up new lines
                    imageUrl: imageUrl, // Regular image URL
                    shinyImageUrl: shinyImageUrl // Shiny image URL
                });
            }
            document.getElementById('pokemonDisplay').innerHTML = "Pokémon data loaded. You can now search or generate a Pokémon.";
        };

        const getRandomPokemon = () => {
            const randomIndex = Math.floor(Math.random() * pokemons.length);
            return pokemons[randomIndex];
        };

        const showPokemon = () => {
            if (pokemons.length === 0) {
                document.getElementById('pokemonDisplay').innerHTML = `<p>Loading Pokémon data...</p>`;
                return;
            }
            currentPokemon = getRandomPokemon(); // Store the current Pokémon
            displayPokemon(currentPokemon); // Display the current Pokémon
        };

        const displayPokemon = (pokemon) => {
            document.getElementById('pokemonDisplay').innerHTML = `
                <div class="pokemon-entry">
                    <h3>${pokemon.name.charAt(0).toUpperCase() + pokemon.name.slice(1)} (${pokemon.type})</h3>
                    <img src="${pokemon.imageUrl}" alt="${pokemon.name}" class="pokemon-image" id="pokemonImage">
                    <p><strong>HP:</strong> ${pokemon.hp}</p>
                    <p><strong>Attack:</strong> ${pokemon.attack}</p>
                    <p><strong>Defense:</strong> ${pokemon.defense}</p>
                    <p><strong>Description:</strong> ${pokemon.description}</p>
                    <input type="button" value="Toggle Shiny" onClick="toggleShiny()">
                </div>`;
        };

        const toggleShiny = () => {
            const imageElement = document.getElementById('pokemonImage');
            if (imageElement.src === currentPokemon.imageUrl) {
                imageElement.src = currentPokemon.shinyImageUrl; // Change to shiny
            } else {
                imageElement.src = currentPokemon.imageUrl; // Change back to regular
            }
        };

        const showMegaEvolution = () => {
            if (!currentPokemon) {
                document.getElementById('pokemonDisplay').innerHTML = `<p>No Pokémon selected. Please generate or search for a Pokémon first.</p>`;
                return;
            }

            // Check if current Pokémon has a Mega sprite
            const megaSpriteURL = megaSprites[currentPokemon.name.toLowerCase()];

            if (megaSpriteURL) {
                const imageElement = document.getElementById('pokemonImage');
                imageElement.src = megaSpriteURL; // Change to Mega Evolution image
                imageElement.alt = `Mega ${currentPokemon.name.charAt(0).toUpperCase() + currentPokemon.name.slice(1)}`;
                document.getElementById('pokemonDisplay').innerHTML += `<p>(Mega Evolution)</p>`;
            } else {
                document.getElementById('pokemonDisplay').innerHTML += `<p>This Pokémon does not have a Mega Evolution available.</p>`;
            }
        };

        const showGigantimax = () => {
            if (!currentPokemon) {
                document.getElementById('pokemonDisplay').innerHTML = `<p>No Pokémon selected. Please generate or search for a Pokémon first.</p>`;
                return;
            }

            // Check if current Pokémon has a Gigantimax sprite
            const gigantamaxSpriteURL = gigantamaxSprites[currentPokemon.name.toLowerCase()];

            if (gigantamaxSpriteURL) {
                const imageElement = document.getElementById('pokemonImage');
                imageElement.src = gigantamaxSpriteURL; // Change to Gigantimax image
                imageElement.alt = `Gigantimax ${currentPokemon.name.charAt(0).toUpperCase() + currentPokemon.name.slice(1)}`;
                document.getElementById('pokemonDisplay').innerHTML += `<p>(Gigantimax)</p>`;
            } else {
                document.getElementById('pokemonDisplay').innerHTML += `<p>This Pokémon does not have Gigantimax available.</p>`;
            }
        };

        const searchPokemon = () => {
            const searchTerm = document.getElementById('pokemonSearch').value.toLowerCase();
            const foundPokemon = pokemons.find(pokemon =>
                pokemon.name.toLowerCase() === searchTerm || pokemon.id === parseInt(searchTerm)
            );

            if (foundPokemon) {
                currentPokemon = foundPokemon; // Store the found Pokémon
                displayPokemon(foundPokemon); // Display found Pokémon
            } else {
                document.getElementById('pokemonDisplay').innerHTML = `<p>No Pokémon found with that name or ID.</p>`;
            }
        };

        // Initially fetch Pokémon data (up to 1025 Pokémon)
        fetchPokemons(1025);
    </script>
</body>

</html>
